{"version":3,"file":"contentScript.js","mappings":"yBAEA,IAAMA,EAASC,aAAaC,QAAQ,gBAEpCC,OAAOC,QAAQC,UAAUC,aAAY,SAACC,GAChCA,EAAQC,KAuBd,SAA+BC,GAC7B,IAAMC,EAAcC,SAASC,cAAc,mBAC3C,IAAID,SAASE,eAAe,iBACvBH,EAAL,CAEAA,EAAYI,mBAAmB,YADhB,6HAjBjB,SAAsBL,GAAc,IAAAM,EACK,QAAvCA,EAAAJ,SAASE,eAAe,uBAAe,IAAAE,GAAvCA,EAAyCC,iBAAiB,SAAS,WACjE,IAAMC,EAAYC,OAAOC,KAAK,IACzBF,IACLA,EAAUN,SAASS,MAAM,uEAADC,OACiDZ,EAAI,gBAE7EQ,EAAUN,SAASW,KAAKC,MAAMC,OAAS,IAEvCP,EAAUN,SAASC,cAAc,QAASW,MAAME,SAAW,SAC7D,GACF,CAQEC,CAAajB,EAHW,CAI1B,CA7BIkB,CAAsBpB,EAAQC,IAAIoB,SAEhCrB,EAAQsB,KACV1B,OAAOC,QAAQ0B,YAAY,CACzBC,SAAU,CAAE/B,OAAQA,EAAQ6B,IAAKtB,EAAQsB,MAG/C,G","sources":["webpack://urssaf-previsu-mail/./src/contentScript.ts"],"sourcesContent":["import { message } from './serviceWorker'\r\n\r\nconst bearer = localStorage.getItem('access_token')\r\n\r\nchrome.runtime.onMessage.addListener((message: message) => {\r\n  if (message.pdf) {\r\n    replaceExistingButton(message.pdf.contenu)\r\n  }\r\n  if (message.url) {\r\n    chrome.runtime.sendMessage({\r\n      allInfos: { bearer: bearer, url: message.url }\r\n    })\r\n  }\r\n})\r\n\r\nfunction openInNewTab(file: string) {\r\n  document.getElementById('openInNewTab')?.addEventListener('click', () => {\r\n    const pdfWindow = window.open('')\r\n    if (!pdfWindow) return\r\n    pdfWindow.document.write(\r\n      `<iframe width='100%' height='100%' src='data:application/pdf;base64,${file}'></iframe>`\r\n    )\r\n    pdfWindow.document.body.style.margin = `0`\r\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n    pdfWindow.document.querySelector('html')!.style.overflow = 'hidden'\r\n  })\r\n}\r\n\r\nfunction replaceExistingButton(file: string) {\r\n  const pjContainer = document.querySelector('.pieces_jointes')\r\n  if (document.getElementById('openInNewTab')) return\r\n  if (!pjContainer) return\r\n  const button = `<button type=\"button\" id=\"openInNewTab\" class=\"btn bouton_fonce\" style=\"margin-left: 3rem\">Ouvrir dans un onglet</button>`\r\n  pjContainer.insertAdjacentHTML('beforeend', button)\r\n  openInNewTab(file)\r\n}\r\n"],"names":["bearer","localStorage","getItem","chrome","runtime","onMessage","addListener","message","pdf","file","pjContainer","document","querySelector","getElementById","insertAdjacentHTML","_document$getElementB","addEventListener","pdfWindow","window","open","write","concat","body","style","margin","overflow","openInNewTab","replaceExistingButton","contenu","url","sendMessage","allInfos"],"sourceRoot":""}